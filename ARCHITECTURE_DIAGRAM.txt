"""
DIAGRAMA DE ARQUITECTURA - EDITOR DE IMAGEN AVANZADO
=====================================================


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FLUJO DE USUARIO                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  1. Cargar Imagen        2. (Opcional) Editar      3. Generar STL      â”‚
â”‚     ImageUploader       â†’   ImageEditor        â†’  LitofanÃ­a            â”‚
â”‚                                                                          â”‚
â”‚  [Usuario carga]     [Ajusta: brillo,          [Usa imagen             â”‚
â”‚   foto JPG           contraste, recorte, etc]   editada si aplica]     â”‚
â”‚                      [Previsualiza en tiempo                            â”‚
â”‚                       real en canvas]                                   â”‚
â”‚                      [Hace click "Aplicar"]                             â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ESTRUCTURA DE DIRECTORIOS                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  backend/                                                               â”‚
â”‚  â”œâ”€â”€ image_processing/                    (NUEVO)                       â”‚
â”‚  â”‚   â”œâ”€â”€ __init__.py                      â† exports pÃºblicas           â”‚
â”‚  â”‚   â”œâ”€â”€ adjustments.py                   â† brillo, contraste, exp,    â”‚
â”‚  â”‚   â”‚                                      gamma, invert              â”‚
â”‚  â”‚   â”œâ”€â”€ filters.py                       â† nitidez, suavizado         â”‚
â”‚  â”‚   â”œâ”€â”€ crop.py                          â† recorte, zoom, rotaciÃ³n    â”‚
â”‚  â”‚   â””â”€â”€ pipeline.py                      â† orquestaciÃ³n + params      â”‚
â”‚  â”œâ”€â”€ routes/                                                            â”‚
â”‚  â”‚   â””â”€â”€ api.py                           â† MODIFICADO (+ 2 endpoints) â”‚
â”‚  â””â”€â”€ [otros directorio existentes]                                     â”‚
â”‚                                                                          â”‚
â”‚  frontend/                                                              â”‚
â”‚  â”œâ”€â”€ src/                                                               â”‚
â”‚  â”‚   â”œâ”€â”€ lib/                                                           â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ components/                                               â”‚
â”‚  â”‚   â”‚   â”‚   â””â”€â”€ ImageEditor.svelte       (NUEVO)                      â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ services/                                                 â”‚
â”‚  â”‚   â”‚   â”‚   â””â”€â”€ apiService.js            â† MODIFICADO (+ applyImage   â”‚
â”‚  â”‚   â”‚   â”‚                                   Filters)                   â”‚
â”‚  â”‚   â”‚   â””â”€â”€ stores/                                                   â”‚
â”‚  â”‚   â”‚       â””â”€â”€ appStore.js              â† MODIFICADO (+ imageEdits   â”‚
â”‚  â”‚   â”‚                                      fields)                     â”‚
â”‚  â”‚   â””â”€â”€ routes/                                                       â”‚
â”‚  â”‚       â””â”€â”€ +page.svelte                 â† MODIFICADO (+ ImageEditor) â”‚
â”‚  â””â”€â”€ [otros directorios existentes]                                    â”‚
â”‚                                                                          â”‚
â”‚  ğŸ“„ DocumentaciÃ³n:                                                      â”‚
â”‚  â”œâ”€â”€ IMAGEEDITOR_README.md                (este archivo)               â”‚
â”‚  â”œâ”€â”€ IMAGEEDITOR_INTEGRATION.md           (arquitectura)               â”‚
â”‚  â”œâ”€â”€ IMAGEEDITOR_USAGE.md                 (guÃ­a usuario)               â”‚
â”‚  â””â”€â”€ IMAGEEDITOR_TECHNICAL.md             (referencia tÃ©cnica)         â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              COMPONENTE: ImageEditor.svelte (449 lÃ­neas)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ–¼ï¸ Editor de Imagen (Opcional)                                 â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ [Cargar imagen]  [Borrar]                              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ File input: [Seleccionar archivo]                      â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  Tabs:  [Ajustes] [Recorte] [Transformar]                    â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ Canvas de PrevisualizaciÃ³n (600x400)                  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ [Muestra imagen editada en tiempo real]               â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ [Rueda mouse = zoom, Shift+click = pan]               â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ [En recorte: drag = dibujar rectÃ¡ngulo]               â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€ TAB 1: AJUSTES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Brillo:      [-100] â”â”â”â”â” [0] â”â”â”â”â” [+100]         â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Contraste:   [-100] â”â”â”â”â” [0] â”â”â”â”â” [+100]         â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ ExposiciÃ³n:  [-2.0] â”â”â”â”â” [0] â”â”â”â”â” [+2.0]         â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Gamma:       [0.50] â”â”â”â”â” [1.0] â”â”â” [2.50]         â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Nitidez:     [0.00] â”â”â”â”â” [0.5] â”â” [1.00]          â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Suavizado:   [0.00] â”â”â”â”â” [0.5] â”â” [1.00]          â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â˜ Invertir colores                                   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ [ğŸ”„ Restablecer ajustes]                             â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€ TAB 2: RECORTE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ "Dibuja rectÃ¡ngulo en la imagen para recortar"       â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â—¯ Modo libre                                         â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â—¯ Mantener proporciÃ³n                               â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â—¯ Ajustar al Ã¡rea                                   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â˜ Mantener aspecto                                  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ [Limpiar recorte]  (si hay recorte activo)         â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€ TAB 3: TRANSFORMAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ RotaciÃ³n: [0Â°] [90Â°] [180Â°] [270Â°]                 â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ Zoom:    [0.5x] â”â”â”â”â” [1.0x] â”â”â”â” [4.0x]           â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ Pan X:   [-1.0] â”â”â”â”â” [0.0] â”â”â”â” [+1.0]             â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ Pan Y:   [-1.0] â”â”â”â”â” [0.0] â”â”â”â” [+1.0]             â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ [âœ“ Aplicar ediciones]  [âœ• Descartar]                 â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         BACKEND: PIPELINE DE PROCESAMIENTO (pipeline.py)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  combine_adjustments(image, ImageProcessingParams)                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚
â”‚                                                                          â”‚
â”‚    Input: PIL Image + 13 parÃ¡metros                                    â”‚
â”‚    â†“                                                                    â”‚
â”‚    1. â–¢ crop_box â†’ apply_crop()                                         â”‚
â”‚    â†“ [opera en coords originales]                                       â”‚
â”‚    2. â–¢ zoom, pan â†’ apply_zoom()                                        â”‚
â”‚    â†“ [reescala a output_size]                                           â”‚
â”‚    3. â–¢ rotation â†’ apply_rotation()                                     â”‚
â”‚    â†“ [0Â°/90Â°/180Â°/270Â° sin interpolaciÃ³n]                              â”‚
â”‚    4. â–¢ brightness â†’ apply_brightness()                                 â”‚
â”‚    â†“ [-100 a +100]                                                     â”‚
â”‚    5. â–¢ contrast â†’ apply_contrast()                                     â”‚
â”‚    â†“ [-100 a +100]                                                     â”‚
â”‚    6. â–¢ exposure â†’ apply_exposure()                                     â”‚
â”‚    â†“ [-2 a +2, fÃ³rmula: I' = I * 2^exp]                                â”‚
â”‚    7. â–¢ gamma â†’ apply_gamma()                                           â”‚
â”‚    â†“ [0.5 a 2.5, fÃ³rmula: I' = I^(1/gamma)]                            â”‚
â”‚    8. â–¢ invert â†’ apply_invert()                                         â”‚
â”‚    â†“ [255 - valor]                                                     â”‚
â”‚    9. â–¢ sharpen â†’ apply_sharpen()                                       â”‚
â”‚    â†“ [0 a 1.0]                                                          â”‚
â”‚    10. â–¢ blur â†’ apply_blur()                                            â”‚
â”‚    â†“ [0 a 1.0, Gaussian kernel]                                         â”‚
â”‚    Output: PIL Image procesada                                         â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATA FLOW: FRONTEND â†” BACKEND                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  FRONTEND                          API                    BACKEND       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€                          â”€â”€â”€                    â”€â”€â”€â”€â”€â”€        â”‚
â”‚                                                                          â”‚
â”‚  ImageEditor.svelte                                                     â”‚
â”‚  â€¢ updatePreview()        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  Canvas JS processing     â”‚
â”‚    (JavaScript in-memory)                    (sin network)              â”‚
â”‚                                                                          â”‚
â”‚  â€¢ applyEdits()           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  processingParams          â”‚
â”‚    (guardar en store)                         (imageEdits state)        â”‚
â”‚                                                                          â”‚
â”‚  â€¢ (Opcional) llamar API                                                â”‚
â”‚    POST /api/apply-image-filters                                        â”‚
â”‚                          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  backend/image_processing/  â”‚
â”‚                          â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  (combinamos_adjustments)   â”‚
â”‚                          â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  JSON con image_base64      â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   INTEGRACIÃ“N EN +PAGE.SVELTE                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  <Grid 2 columnas>                                                      â”‚
â”‚  â”œâ”€ IZQUIERDA (vertical)     â”œâ”€ DERECHA (vertical)                     â”‚
â”‚  â”‚  â€¢ ImageUploader             â€¢ ThreeViewer                          â”‚
â”‚  â”‚  â€¢ ImageEditor (NUEVO)       â€¢ Tips                                 â”‚
â”‚  â”‚  â€¢ ParameterControls                                                â”‚
â”‚  â”‚  â€¢ AdvancedShapeControls                                            â”‚
â”‚  â”‚  â€¢ Lithophane360Controls                                            â”‚
â”‚  â”‚  â€¢ PreviewEnhancements                                              â”‚
â”‚  â”‚  â€¢ ActionButtons                                                    â”‚
â”‚  â”‚                                                                      â”‚
â”‚  â””â”€ Control flow: â†’Usuario llena formulariosâ†’ Hace click Generar      â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    NUEVOS ENDPOINTS API                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  POST /api/process-image-advanced                                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                       â”‚
â”‚  ParÃ¡metros: file (imagen)                                              â”‚
â”‚  Retorna: {success, message, image_base64, width, height, format}     â”‚
â”‚  Uso: PrevisualizaciÃ³n general                                          â”‚
â”‚                                                                          â”‚
â”‚                                                                          â”‚
â”‚  POST /api/apply-image-filters                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                         â”‚
â”‚  ParÃ¡metros: file (imagen), adjustments (JSON)                         â”‚
â”‚  Retorna: {success, message, image_base64, width, height, format}     â”‚
â”‚  Uso: Procesar imagen con filtros especÃ­ficos                          â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ESTADO EN APPSTORE (processingParams)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  hasImageEdits: boolean                                                â”‚
â”‚  imageEdits: {                                                          â”‚
â”‚    brightness: -100 a +100     (int)                                   â”‚
â”‚    contrast: -100 a +100       (int)                                   â”‚
â”‚    exposure: -2 a +2            (float)                                â”‚
â”‚    gamma: 0.5 a 2.5             (float)                                â”‚
â”‚    sharpen: 0 a 1.0             (float)                                â”‚
â”‚    blur: 0 a 1.0                (float)                                â”‚
â”‚    invert: boolean                                                     â”‚
â”‚    rotation: 0/90/180/270        (int)                                 â”‚
â”‚    zoom: 0.5 a 4.0              (float)                                â”‚
â”‚    pan_x: -1.0 a +1.0           (float)                                â”‚
â”‚    pan_y: -1.0 a +1.0           (float)                                â”‚
â”‚    crop_box: [l,t,r,b] o null   (array|null)                          â”‚
â”‚    maintain_aspect: boolean                                            â”‚
â”‚  }                                                                       â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      COMPATIBILIDAD                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  âœ… ProyecciÃ³n Frontal           (sin cambios)                          â”‚
â”‚  âœ… ProyecciÃ³n 360Â°              (sin cambios)                          â”‚
â”‚  âœ… Perfiles por DiÃ¡metros       (sin cambios)                          â”‚
â”‚  âœ… TorsiÃ³n                      (sin cambios)                          â”‚
â”‚  âœ… Escalado Progresivo          (sin cambios)                          â”‚
â”‚  âœ… Curvas Avanzadas             (sin cambios)                          â”‚
â”‚  âœ… AnimaciÃ³n + IluminaciÃ³n      (sin cambios)                          â”‚
â”‚                                                                          â”‚
â”‚  RazÃ³n: ImageEditor es agnÃ³stico de proyecciÃ³n                         â”‚
â”‚         Se aplica ANTES de parÃ¡metros geomÃ©tricos                      â”‚
â”‚         No modifica GenerateMeshRequest ni mesh_generator              â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


RESUMEN ESTADÃSTICO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Backend:
    â€¢ MÃ³dulos nuevos: 5 (+ 1 init)
    â€¢ Funciones: 11
    â€¢ Clases: 1 (ImageProcessingParams)
    â€¢ LÃ­neas de cÃ³digo: ~500

  Frontend:
    â€¢ Componentes nuevos: 1 (ImageEditor.svelte)
    â€¢ LÃ­neas de cÃ³digo: ~449
    â€¢ Tabs/Secciones: 3
    â€¢ Controles interactivos: 12

  API:
    â€¢ Endpoints nuevos: 2
    â€¢ LÃ­neas modificadas en api.py: 6 (imports + 2 endpoints)

  Store:
    â€¢ Campos nuevos: 2 (hasImageEdits + imageEdits)
    â€¢ ParÃ¡metros dentro de imageEdits: 13

  IntegraciÃ³n:
    â€¢ Archivos modificados: 3 (+page.svelte, appStore.js, apiService.js)
    â€¢ Nuevas lÃ­neas en archivos existentes: ~20

  DocumentaciÃ³n:
    â€¢ Archivos creados: 4 (README + 3 guÃ­as)
    â€¢ PÃ¡ginas de documentaciÃ³n: ~30

  TOTAL: Cero duplicaciÃ³n de cÃ³digo âœ…
         Cero modificaciÃ³n de lÃ³gica existente âœ…
         Totalmente opcional para usuario âœ…

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
"""
